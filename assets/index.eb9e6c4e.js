var e=Object.defineProperty,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,a=(t,s,l)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[s]=l,n=(e,n)=>{for(var i in n||(n={}))s.call(n,i)&&a(e,i,n[i]);if(t)for(var i of t(n))l.call(n,i)&&a(e,i,n[i]);return e};import{d as i,Y as r,W as o,c,a as d,w as u,l as h,j as m,F as p,D as f,a6 as g,a7 as v,T as b,z as w,I as k,a5 as x,K as S,S as y,r as T,k as C,a9 as _,q as $,a8 as E,aa as F,b as L,e as V,f as A,R as B,o as P,p as I,$ as z}from"./vue.2d972967.js";import{c as O,d as M,r as q,b as W}from"./index.3abe9d3c.js";import{S as j,F as R}from"./element-plus.9c25a01d.js";var H=i({name:"SidebarItem",props:{item:{type:Object,required:!0},isNest:{type:Boolean,default:!1},basePath:{type:String,default:""}},computed:{opened(){return this.$store.state.app.sidebar.opened}}});const D={key:0},N={class:"menu-wrapper"};H.render=function(e,t,s,l,a,n){const i=r("el-menu-item"),g=r("SidebarItem",!0),v=r("el-submenu");return e.item.meta&&!e.item.hide?(o(),c("div",D,[d("div",N,[e.item.children&&e.item.children.length?(o(),c(v,{key:1,index:e.item.path},{title:u((()=>[e.item.meta.icon?(o(),c("i",{key:0,class:[e.item.meta.icon,"elIcon"]},null,2)):m("",!0),d("span",null,h(e.item.meta.title),1)])),default:u((()=>[(o(!0),c(p,null,f(e.item.children,(e=>(o(),c("div",{key:e.path},[e.children&&e.children.length?(o(),c(g,{key:e.path,index:e.path,"is-nest":!0,item:e,class:"nest-menu"},null,8,["index","item"])):(o(),c(i,{key:e.path,index:e.path},{title:u((()=>[d("span",null,h(e.meta.title),1)])),_:2},1032,["index"]))])))),128))])),_:1},8,["index"])):(o(),c(i,{key:0,index:e.item.path,class:{"submenu-title-noDropdown":!e.isNest}},{title:u((()=>[d("span",null,h(e.item.meta.title),1)])),default:u((()=>[e.item.meta.icon?(o(),c("i",{key:0,class:[e.item.meta.icon,"elIcon"]},null,2)):m("",!0)])),_:1},8,["index","class"]))])])):m("",!0)};var Y=i({components:{SidebarItem:H},data:()=>({routers:[],logoSrc:"/assets/logo.03d6d6da.png"}),computed:{sidebar(){return this.$store.state.app.sidebar},isCollapse(){return!this.$store.state.app.sidebar.opened}},mounted(){this.routers=this.filterRoutes()},methods:{filterRoutes(){const e=O(),t=[];for(let s=0;s<M.length;s++)"/"===M[s].path&&t.push(...M[s].children);for(let s=0;s<t.length;s++)t[s].meta&&t[s].meta.roles&&!t[s].meta.roles.includes(e)&&(t.splice(s,1),s--);for(let s=0;s<t.length;s++){const l=[];if(t[s].children){for(let a=0;a<t[s].children.length;a++){const n=t[s].children[a];(n.meta&&!n.meta.roles||n.meta&&n.meta.roles&&n.meta.roles.includes(e))&&l.push(n)}t[s].children=[...l]}}return t}}});const U=x();g("data-v-4af724c5");const K={class:"sidebar-container"},X={class:"logoText"};v();const G=U(((e,t,s,l,a,n)=>{const i=r("sidebar-item"),u=r("el-menu"),h=r("el-scrollbar");return o(),c("div",K,[d("div",{class:"logo",onClick:t[1]||(t[1]=t=>e.$router.push("/"))},[d("img",{class:"logoImg",src:e.logoSrc,alt:"logo"},null,8,["src"]),d(b,{name:"el-zoom-in-center"},{default:U((()=>[w(d("h1",X,"Vue Element Admin",512),[[k,e.sidebar.opened]])])),_:1})]),d(h,{"wrap-class":"scrollbar-wrapper"},{default:U((()=>[d(u,{router:!0,"default-active":e.$route.path,collapse:e.isCollapse,"show-timeout":200,"unique-opened":!0,"text-color":"#fff","background-color":"#4a5a74","active-text-color":"#409EFF"},{default:U((()=>[(o(!0),c(p,null,f(e.routers,(e=>(o(),c(i,{key:e.path,index:e.path,item:e},null,8,["index","item"])))),128))])),_:1},8,["default-active","collapse"])])),_:1})])}));Y.render=G,Y.__scopeId="data-v-4af724c5";var J=i({name:"Hamburger",props:{isActive:{type:Boolean,default:!1}},emits:{toggleClick:null}});const Q=x();g("data-v-43ad789f");const Z=d("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"},null,-1);v();const ee=Q(((e,t,s,l,a,n)=>(o(),c("div",{style:{padding:"0 15px"},onClick:t[1]||(t[1]=t=>e.$emit("toggleClick"))},[(o(),c("svg",{class:[{"is-active":e.isActive},"hamburger"],viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"},[Z],2))]))));J.render=ee,J.__scopeId="data-v-43ad789f";var te=i({data:()=>({levelList:[]}),watch:{$route(){this.getBreadcrumb()}},created(){this.getBreadcrumb()},methods:{getBreadcrumb(){let e=this.$route.matched.filter((e=>e.meta&&e.meta.title));const t=e[0];if(!this.isDashboard(t)){e=[{path:"/home",meta:{title:"首页"}}].concat(e)}this.levelList=e.filter((e=>e.meta&&e.meta.title&&!1!==e.meta.breadcrumb))},isDashboard(e){const t=e&&e.name;return!!t&&t.trim().toLocaleLowerCase()==="Home".toLocaleLowerCase()}}});const se=x();g("data-v-f503ecae");const le={key:0,class:"no-redirect"};v();const ae=se(((e,t,s,l,a,n)=>{const i=r("router-link"),u=r("el-breadcrumb-item"),m=r("el-breadcrumb");return o(),c(m,{separator:"/",class:"app-breadcrumb"},{default:se((()=>[d(y,{name:"breadcrumb"},{default:se((()=>[(o(!0),c(p,null,f(e.levelList,((t,s)=>(o(),c(u,{key:t.path},{default:se((()=>["noRedirect"===t.redirect||s==e.levelList.length-1?(o(),c("span",le,h(t.meta.title),1)):(o(),c(i,{key:1,to:t.redirect||t.path},{default:se((()=>[S(h(t.meta.title),1)])),_:2},1032,["to"]))])),_:2},1024)))),128))])),_:1})])),_:1})}));te.render=ae,te.__scopeId="data-v-f503ecae";var ne,ie,re,oe,ce,de,ue={exports:{}};
/*!
* screenfull
* v5.1.0 - 2020-12-24
* (c) Sindre Sorhus; MIT License
*/ne=ue,ie="undefined"!=typeof window&&void 0!==window.document?window.document:{},re=ne.exports,oe=function(){for(var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],s=0,l=t.length,a={};s<l;s++)if((e=t[s])&&e[1]in ie){for(s=0;s<e.length;s++)a[t[0][s]]=e[s];return a}return!1}(),ce={change:oe.fullscreenchange,error:oe.fullscreenerror},de={request:function(e,t){return new Promise(function(s,l){var a=function(){this.off("change",a),s()}.bind(this);this.on("change",a);var n=(e=e||ie.documentElement)[oe.requestFullscreen](t);n instanceof Promise&&n.then(a).catch(l)}.bind(this))},exit:function(){return new Promise(function(e,t){if(this.isFullscreen){var s=function(){this.off("change",s),e()}.bind(this);this.on("change",s);var l=ie[oe.exitFullscreen]();l instanceof Promise&&l.then(s).catch(t)}else e()}.bind(this))},toggle:function(e,t){return this.isFullscreen?this.exit():this.request(e,t)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,t){var s=ce[e];s&&ie.addEventListener(s,t,!1)},off:function(e,t){var s=ce[e];s&&ie.removeEventListener(s,t,!1)},raw:oe},oe?(Object.defineProperties(de,{isFullscreen:{get:function(){return Boolean(ie[oe.fullscreenElement])}},element:{enumerable:!0,get:function(){return ie[oe.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(ie[oe.fullscreenEnabled])}}}),re?ne.exports=de:window.screenfull=de):re?ne.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};var he=ue.exports,me=i({name:"Screenfull",data:()=>({isFullscreen:!1}),mounted(){this.init()},beforeUnmount(){this.destroy()},methods:{click:()=>he.isEnabled?(he.toggle(),!1):(j({message:"you browser can not work",type:"warning"}),!1),change(){this.isFullscreen=he.isFullscreen},init(){he.isEnabled&&he.on("change",this.change)},destroy(){he.isEnabled&&he.off("change",this.change)}}});const pe=x();g("data-v-8ccddcba");const fe=d("i",{class:"el-icon-full-screen"},null,-1);v();const ge=pe(((e,t,s,l,a,n)=>(o(),c("div",{class:"screenfull-box",onClick:t[1]||(t[1]=(...t)=>e.click&&e.click(...t))},[fe]))));me.render=ge,me.__scopeId="data-v-8ccddcba";var ve=i({components:{Breadcrumb:te,Hamburger:J,Screenfull:me},data:()=>({status:!1}),computed:{sidebar(){return this.$store.state.app.sidebar},name:()=>localStorage.name},methods:{close(){this.status=!1},toggleSideBar(){this.$store.dispatch("app/toggleSideBar")},editPossword(){j.warning("暂不支持修改密码")},loginOut(){R.confirm("退出登录","提示",{confirmButtonText:"确认",cancelButtonText:"取消",cancelButtonClass:"cancelBtn",type:"warning"}).then((()=>{q(),W(),this.$store.dispatch("tagsView/delAllViews").then((()=>{this.$router.push("/login")}))})).catch((()=>{}))}}});const be=x();g("data-v-e3aa2b62");const we={class:"right-menu"},ke=d("div",{class:"avatar-wrapper"},[d("img",{src:"http://www.xueyueob.cn/icons/favicon.ico",class:"user-avatar"}),d("i",{class:"el-icon-caret-bottom"})],-1),xe=S("首页");v();const Se=be(((e,t,s,l,a,n)=>{const i=r("Hamburger"),u=r("Breadcrumb"),h=r("Screenfull"),m=r("el-tooltip"),p=r("el-dropdown-item"),f=r("router-link"),g=r("el-dropdown-menu"),v=r("el-dropdown"),b=r("el-menu");return o(),c(b,{class:"navbar",mode:"horizontal"},{default:be((()=>[d(i,{class:"hamburger-container","is-active":e.sidebar.opened,onToggleClick:e.toggleSideBar},null,8,["is-active","onToggleClick"]),d(u,{class:"breadcrumb-container"}),d("div",we,[d(m,{effect:"dark",content:"全屏",placement:"bottom"},{default:be((()=>[d(h,{class:"screenfull"})])),_:1}),d(v,{class:"avatar-container right-menu-item",trigger:"hover"},{dropdown:be((()=>[d(g,null,{default:be((()=>[d(f,{to:"/"},{default:be((()=>[d(p,null,{default:be((()=>[xe])),_:1})])),_:1}),d(p,{divided:""},{default:be((()=>[d("span",{style:{display:"block"},onClick:t[1]||(t[1]=(...t)=>e.editPossword&&e.editPossword(...t))},"修改密码")])),_:1}),d(p,{divided:""},{default:be((()=>[d("span",{style:{display:"block"},onClick:t[2]||(t[2]=(...t)=>e.loginOut&&e.loginOut(...t))},"登出")])),_:1})])),_:1})])),default:be((()=>[ke])),_:1})])])),_:1})}));ve.render=Se,ve.__scopeId="data-v-e3aa2b62";var ye=i({name:"ScrollPane",emits:{scroll:null},data:()=>({left:0}),computed:{scrollWrapper(){return this.$refs.scrollContainer.$refs.wrap}},mounted(){this.scrollWrapper.addEventListener("scroll",this.emitScroll,!0)},beforeUnmount(){this.scrollWrapper.removeEventListener("scroll",this.emitScroll)},methods:{handleScroll(e){const t=e.wheelDelta||40*-e.deltaY,s=this.scrollWrapper;s.scrollLeft=s.scrollLeft+t/4},emitScroll(){this.$emit("scroll")},moveToTarget(e){const t=this.$refs.scrollContainer.$el.offsetWidth,s=this.scrollWrapper,l=document.getElementsByClassName("tags-view-item");let a=null,n=null;if(l.length>0&&(a=l[0],n=l[l.length-1]),a===e)s.scrollLeft=0;else if(n===e)s.scrollLeft=s.scrollWidth-t;else{const a=[...l].findIndex((t=>t===e)),n=l[a-1],i=l[a+1],r=i.offsetLeft+i.offsetWidth+4,o=n.offsetLeft-4;r>s.scrollLeft+t?s.scrollLeft=r-t:o<s.scrollLeft&&(s.scrollLeft=o)}}}});const Te=x(),Ce=Te(((e,t,s,l,a,n)=>{const i=r("el-scrollbar");return o(),c(i,{ref:"scrollContainer",vertical:!1,class:"scroll-container",onWheel:C(e.handleScroll,["prevent"])},{default:Te((()=>[T(e.$slots,"default")])),_:3},8,["onWheel"])}));ye.render=Ce,ye.__scopeId="data-v-0a3df36e";var _e={},$e=i({components:{ScrollPane:ye},data:()=>({visible:!1,top:0,left:0,selectedTag:{},affixTags:[]}),computed:{visitedViews(){return this.$store.state.tagsView.visitedViews},routes(){return this.$store.state.permission.routes}},watch:{$route(e){this.addTags(),this.moveToCurrentTag(e)},visible(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},mounted(){this.initTags(),this.addTags()},methods:{isActive(e){return e.path===this.$route.path},isAffix:e=>e.meta&&e.meta.affix,filterAffixTags(e,t="/"){let s=[];return e.forEach((e=>{if(e.meta&&e.meta.affix){const l=_e.resolve(t,e.path);s.push({fullPath:l,path:l,name:e.name,meta:n({},e.meta)})}if(e.children){const t=this.filterAffixTags(e.children,e.path);t.length>=1&&(s=[...s,...t])}})),s},initTags(){const e=this.affixTags=this.filterAffixTags(this.routes);for(const t of e)t.name&&this.$store.dispatch("tagsView/addVisitedView",t)},addTags(){const{name:e}=this.$route;return e&&this.$store.dispatch("tagsView/addView",this.$route),!1},moveToCurrentTag(e){this.$nextTick((()=>{const t=this.visitedViews,s=document.getElementsByClassName("tags-view-item");for(let l=0,a=t.length;l<a;l++)if(t[l].path===e.path){this.$refs.scrollPane.moveToTarget(s[l]),t[l].fullPath!==this.$route.fullPath&&this.$store.dispatch("tagsView/updateVisitedView",this.$route);break}}))},closeSelectedTag(e){this.$store.dispatch("tagsView/delView",e).then((({visitedViews:t})=>{this.isActive(e)&&this.toLastView(t)}))},closeOthersTags(){this.$router.push(this.selectedTag),this.$store.dispatch("tagsView/delOthersViews",this.selectedTag).then((()=>{this.moveToCurrentTag(this.selectedTag)}))},closeAllTags(e){this.$store.dispatch("tagsView/delAllViews").then((({visitedViews:t})=>{this.affixTags.some((t=>t.path===e.path))||this.toLastView(t)}))},toLastView(e){const t=e.slice(-1)[0];t?this.$router.push(t.fullPath):this.$router.push("/")},openMenu(e,t){const s=this.$el.getBoundingClientRect().left,l=this.$el.offsetWidth-105,a=t.clientX-s+15;this.left=a>l?l:a,this.top=t.clientY,this.visible=!0,this.selectedTag=e},closeMenu(){this.visible=!1},handleScroll(){this.closeMenu()}}});const Ee=x();g("data-v-9b2254d8");const Fe={id:"tags-view-container",class:"tags-view-container"};v();const Le=Ee(((e,t,s,l,a,n)=>{const i=r("router-link"),u=r("ScrollPane");return o(),c("div",Fe,[d(u,{ref:"scrollPane",class:"tags-view-wrapper",onScroll:e.handleScroll},{default:Ee((()=>[(o(!0),c(p,null,f(e.visitedViews,(t=>(o(),c(i,{key:t.path,to:{path:t.path,query:t.query,fullPath:t.fullPath},class:[e.isActive(t)?"active":"","tags-view-item"],onMouseup:C((s=>e.isAffix(t)?"":e.closeSelectedTag(t)),["middle"]),onContextmenu:C((s=>e.openMenu(t,s)),["prevent"])},{default:Ee((()=>[S(h(t.title)+" ",1),e.isAffix(t)?m("",!0):(o(),c("span",{key:0,class:"el-icon-close",onClick:C((s=>e.closeSelectedTag(t)),["prevent","stop"])},null,8,["onClick"]))])),_:2},1032,["to","class","onMouseup","onContextmenu"])))),128))])),_:1},8,["onScroll"]),w(d("ul",{style:{left:e.left+"px",top:e.top+"px"},class:"contextmenu"},[e.isAffix(e.selectedTag)?m("",!0):(o(),c("li",{key:0,onClick:t[1]||(t[1]=t=>e.closeSelectedTag(e.selectedTag))},"Close")),d("li",{onClick:t[2]||(t[2]=(...t)=>e.closeOthersTags&&e.closeOthersTags(...t))},"Close Others"),d("li",{onClick:t[3]||(t[3]=t=>e.closeAllTags(e.selectedTag))},"Close All")],4),[[k,e.visible]])])}));$e.render=Le,$e.__scopeId="data-v-9b2254d8";var Ve=i({name:"AppMain"});const Ae=x();g("data-v-e12393d6");const Be={class:"app-main"};v();const Pe=Ae(((e,t,s,l,a,n)=>{const i=r("router-view");return o(),c("section",Be,[d(i,null,{default:Ae((({Component:e})=>[d(b,null,{default:Ae((()=>[(o(),c(_,null,[(o(),c($(e)))],1024))])),_:2},1024)])),_:1})])}));Ve.render=Pe,Ve.__scopeId="data-v-e12393d6",g("data-v-165582ec");const Ie={class:"main-container"};v();var ze=i({expose:[],setup(e){i({name:"Layout",components:{AppMain:Ve,Navbar:ve,Sidebar:Y,TagsView:$e}});const t=E(),s=F(),l=L(992),a=V((()=>s.state.app.sidebar.opened)),n=V((()=>s.state.app.sidebar.withoutAnimation)),r=V((()=>s.state.app.device)),u=V((()=>({hideSidebar:!a.value,openSidebar:a.value,withoutAnimation:n.value,mobile:"mobile"===r.value})));A(t,(()=>{"mobile"===r.value&&a.value&&s.dispatch("app/closeSideBar",{withoutAnimation:!1})})),B((()=>{window.addEventListener("resize",f)})),P((()=>{p()&&(s.dispatch("app/toggleDevice","mobile"),s.dispatch("app/closeSideBar",{withoutAnimation:!0}))})),I((()=>{window.removeEventListener("resize",f)}));const h=()=>{s.dispatch("app/closeSideBar",{withoutAnimation:!1})},p=()=>document.body.getBoundingClientRect().width-1<l.value,f=()=>{if(!document.hidden){const e=p();s.dispatch("app/toggleDevice",e?"mobile":"desktop"),e&&s.dispatch("app/closeSideBar",{withoutAnimation:!0})}};return(e,t)=>(o(),c("div",{class:["app-wrapper",z(u)]},["mobile"===z(r)&&z(a)?(o(),c("div",{key:0,class:"drawer-bg",onClick:h})):m("",!0),d(Y),d("div",Ie,[d(ve),d($e),d(Ve)])],2))}});ze.__scopeId="data-v-165582ec";export default ze;
